# Project Structure Documentation

This document provides a comprehensive overview of the folder and file structure of the "Food to Notion" application. It outlines the purpose of each directory and key file, explaining their roles and relationships within the codebase.

## Root Directory

The root directory contains configuration files for the Next.js framework, TypeScript, Tailwind CSS, and project dependencies.

-   `.next/`: (Not shown in layout) The output directory for the Next.js build.
-   `__tests__/`: Contains all project-related tests.
    -   `conversion.test.ts`: Unit tests for the data conversion utility functions in `lib/conversion.ts`.
-   `agent-docs/`: Contains documentation generated by or for AI agents.
-   `app/`: The core of the Next.js application, using the App Router.
-   `components/`: Contains all React components used throughout the application.
-   `hooks/`: Houses custom React hooks for managing state and side effects.
-   `lib/`: A collection of core utility and library functions.
-   `node_modules/`: (Not shown in layout) Contains all the project's third-party dependencies.
-   `services/`: Handles API client logic for external services.
-   `store/`: Contains the Zustand global state management store.
-   `types/`: Contains all custom TypeScript type definitions.
-   `utils/`: Contains general-purpose utility functions.
-   `components.json`: Configuration file for `shadcn/ui`.
-   `next.config.mjs`: Configuration file for Next.js.
-   `package.json`: Defines project metadata, dependencies, and scripts.
-   `postcss.config.js`: Configuration file for PostCSS.
-   `tailwind.config.js`: Configuration file for Tailwind CSS.
-   `tsconfig.json`: Configuration file for TypeScript.

---

## `app/` Directory

This directory is the heart of the application, leveraging the Next.js App Router for routing and page rendering.

-   `api/`: Defines all server-side API routes.
    -   `notion/`: API routes for interacting with the Notion API.
        -   `database/[databaseId]/ids/route.ts`: Fetches all FDC IDs from a database.
        -   `database/[databaseId]/pages/route.ts`: Fetches detailed page data for a list of FDC IDs.
        -   `pages/[pageId]/route.ts`: Updates a specific Notion page.
        -   `pages/route.ts`: Creates a new Notion page.
    -   `usda/`: API routes for interacting with the USDA FoodData Central API.
        -   `food/[fdcId]/route.ts`: Fetches details for a specific food item by its FDC ID.
        -   `search/route.ts`: Searches for food items in the USDA database.
-   `saved-items/`: A route for displaying items the user has saved from Notion.
-   `globals.css`: Global stylesheet for the application.
-   `layout.tsx`: The root layout component for the entire application. Contains the shared `NavigationSidebar` and `Header`.
-   `page.tsx`: The entry point and main page of the application (homepage), responsible for displaying search results.

---

## `components/` Directory

This directory contains reusable React components.

-   `ui/`: Contains UI primitives built with `shadcn/ui`.
-   `FoodCard.tsx`: A versatile component to display a single food item's information, either from a new search or from saved Notion data.
-   `NavigationSidebar.tsx`: The main sidebar for navigating the application.
-   `NotionSetupModal.tsx`: A modal to guide the user through the Notion setup process.
-   `providers.tsx`: Wraps the application with context providers (e.g., React Query, Toaster).
-   `SearchModal.tsx`: A modal that contains the food search functionality.
-   `ServingSizeSelector.tsx`: A component that allows users to select a serving size for a food item.
-   `Header.tsx`: The main application header component.

---

## `hooks/` Directory

This directory contains custom React hooks to encapsulate and reuse stateful logic.

-   `useFoodDetails.ts`: A hook to fetch and manage the state for a single food item's details using React Query.

---

## `lib/` Directory

This directory contains core, low-level utility functions.

-   `conversion.ts`: Functions for converting between different measurement units.
-   `notion.ts`: Utility functions for mapping data to Notion's format.
-   `nutrientScaling.ts`: Functions for calculating and scaling nutrient values.
-   `utils.ts`: General utility functions (e.g., `cn` for class names).

---

## `services/` Directory

This directory contains functions that are responsible for making API calls to the application's backend.

-   `notionApi.ts`: A service that abstracts the logic for making requests to the application's Notion API routes.
-   `usdaApi.ts`: A service that abstracts the logic for making requests to the application's USDA API routes.

---

## `store/` Directory

This directory contains the global state management logic for the application.

-   `appStore.ts`: The central Zustand store that manages the entire application state, including UI state, Notion data, and search results.

---

## `types/` Directory

This directory holds all TypeScript type definitions for the application, ensuring type safety.

-   `index.ts`: The main file that exports all type definitions. This likely contains types for Food items, Notion pages, API responses, etc.

---

## `utils/` Directory

This directory contains miscellaneous utility functions that do not fit into the other categories.

-   `cn.ts`: A utility function from `shadcn/ui` that merges Tailwind CSS classes, typically using `clsx` and `tailwind-merge`.
-   `formatters.ts`: Functions used to format data for display in the UI (e.g., formatting dates, numbers, or nutrient values). 