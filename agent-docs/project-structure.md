# Project Structure Documentation

This document provides a comprehensive overview of the folder and file structure of the "Food to Notion" application. It outlines the purpose of each directory and key file, explaining their roles and relationships within the codebase.

## Root Directory

The root directory contains configuration files for the Next.js framework, TypeScript, Tailwind CSS, and project dependencies.

-   `.next/`: (Not shown in layout) The output directory for the Next.js build.
-   `__tests__/`: Contains all project-related tests.
    -   `conversion.test.ts`: Unit tests for the data conversion utility functions in `lib/conversion.ts`.
-   `agent-docs/`: Contains documentation generated by or for AI agents.
-   `app/`: The core of the Next.js application, using the App Router.
-   `components/`: Contains all React components used throughout the application.
-   `hooks/`: Houses custom React hooks for managing state and side effects.
-   `lib/`: A collection of core utility and library functions.
-   `node_modules/`: (Not shown in layout) Contains all the project's third-party dependencies.
-   `services/`: Handles API client logic for external services.
-   `types/`: Contains all custom TypeScript type definitions.
-   `utils/`: Contains general-purpose utility functions.
-   `components.json`: Configuration file for `shadcn/ui`.
-   `next.config.mjs`: Configuration file for Next.js.
-   `package.json`: Defines project metadata, dependencies, and scripts.
-   `postcss.config.js`: Configuration file for PostCSS.
-   `tailwind.config.js`: Configuration file for Tailwind CSS.
-   `tsconfig.json`: Configuration file for TypeScript.

---

## `app/` Directory

This directory is the heart of the application, leveraging the Next.js App Router for routing and page rendering.

-   `api/`: Defines all server-side API routes.
    -   `notion/`: API routes for interacting with the Notion API.
        -   `database/[databaseId]/...`: API endpoints for fetching and managing Notion databases.
        -   `pages/[pageId]/...`: API endpoints for fetching and creating Notion pages.
    -   `usda/`: API routes for interacting with the USDA FoodData Central API.
        -   `food/[fdcId]/route.ts`: Fetches details for a specific food item by its FDC ID.
        -   `search/route.ts`: Searches for food items in the USDA database.
-   `saved-items/`: A route for displaying items the user has saved.
-   `globals.css`: Global stylesheet for the application.
-   `layout.tsx`: The root layout component for the entire application.
-   `page.tsx`: The entry point and main page of the application (homepage).

---

## `components/` Directory

This directory contains reusable React components, separated into general components and UI primitives.

-   `ui/`: Contains UI primitives built with `shadcn/ui` (e.g., `Button.tsx`, `Card.tsx`, `Modal.tsx`). These are foundational building blocks for the application's interface.
-   `FoodCard.tsx`: A component to display a single food item's information.
-   `FoodResultsList.tsx`: Renders a list of `FoodCard` components based on search results.
-   `NavigationSidebar.tsx`: The main sidebar for navigating the application.
-   `NotionSetupModal.tsx`: A modal to guide the user through the initial Notion setup process.
-   `providers.tsx`: Wraps the application with context providers (e.g., React Query).
-   `SearchModal.tsx`: A modal that likely contains the food search functionality.
-   `ServingSizeSelector.tsx`: A component that allows users to select a serving size for a food item.

---

## `hooks/` Directory

This directory contains custom React hooks to encapsulate and reuse stateful logic.

-   `useFoodDetails.ts`: A hook to fetch and manage the state for a single food item's details.
-   `useFoodSearch.ts`: A hook to handle the logic for searching food items, including state management for query, results, and loading state.
-   `useNotionIntegration.ts`: A hook to manage the state and logic related to Notion API interactions.

---

## `lib/` Directory

This directory contains core, low-level utility functions that are used across the application.

-   `conversion.ts`: Functions for converting data between different formats (e.g., from USDA API format to the application's internal format).
-   `notion.ts`: Utility functions specifically for interacting with the Notion API, likely containing logic to format requests and parse responses.
-   `nutrientScaling.ts`: Functions for calculating and scaling nutrient values based on serving size.
-   `utils.ts`: General utility functions. This is a common file generated by `shadcn/ui` and might contain helper functions for things like class name merging.

---

## `services/` Directory

This directory contains functions that are responsible for making API calls to the backend.

-   `notionApi.ts`: A service that abstracts the logic for making requests to the application's Notion API routes (`/api/notion/...`).
-   `usdaApi.ts`: A service that abstracts the logic for making requests to the application's USDA API routes (`/api/usda/...`).

---

## `types/` Directory

This directory holds all TypeScript type definitions for the application, ensuring type safety.

-   `index.ts`: The main file that exports all type definitions. This likely contains types for Food items, Notion pages, API responses, etc.

---

## `utils/` Directory

This directory contains miscellaneous utility functions that do not fit into the other categories.

-   `cn.ts`: A utility function from `shadcn/ui` that merges Tailwind CSS classes, typically using `clsx` and `tailwind-merge`.
-   `formatters.ts`: Functions used to format data for display in the UI (e.g., formatting dates, numbers, or nutrient values). 